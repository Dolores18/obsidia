// 定义 Shape trait
trait Shape {
    fn draw(&self);
}

// 定义 Circle 结构体
struct Circle;

impl Shape for Circle {
    fn draw(&self) {
        println!("Drawing a circle");
    }
}

// 定义 Square 结构体
struct Square;

impl Shape for Square {
    fn draw(&self) {
        println!("Drawing a square");
    }
}

// 定义 ShapeFactory trait
trait ShapeFactory {
    type ShapeType: Shape;
    fn create_shape(&self) -> Self::ShapeType;
}

// 实现 CircleFactory
struct CircleFactory;

impl ShapeFactory for CircleFactory {
    type ShapeType = Circle;
    fn create_shape(&self) -> Self::ShapeType {
        Circle
    }
}

// 实现 SquareFactory
struct SquareFactory;

impl ShapeFactory for SquareFactory {
    type ShapeType = Square;
    fn create_shape(&self) -> Self::ShapeType {
        Square
    }
}

fn main() {
    let circle_factory = CircleFactory;
    let circle = circle_factory.create_shape();
    circle.draw();

    let square_factory = SquareFactory;
    let square = square_factory.create_shape();
    square.draw();
}
