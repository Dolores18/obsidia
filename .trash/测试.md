```yaml
Habit_3:
Habit_4:
---
```

1

[![](https://forum-zh.obsidian.md/user_avatar/forum-zh.obsidian.md/jackxmk/144/14808_2.png)](https://forum-zh.obsidian.md/u/Jackxmk)

[Jackxmk](https://forum-zh.obsidian.md/u/Jackxmk)[Jack Wong](https://forum-zh.obsidian.md/u/Jackxmk)

![](https://forum-zh.obsidian.md/user_avatar/forum-zh.obsidian.md/azona77/72/8828_2.png "Azona77")

[1 å¤©](https://forum-zh.obsidian.md/t/topic/35171/4 "å‘å¸ƒæ—¥æœŸ")

è¿™æ˜¯ç«™å†…å¤§ä½¬çš„æ—¥è®°æ¨¡æ¿æºç ï¼ŒåŒæ ·ä¸èƒ½æ˜¾ç¤ºï¼ŒåŒæ—¶å› ä¸ºè¿™ä¸ªé—®é¢˜ä¸èƒ½ç”¨æ­¤æ¨¡æ¿æ¥åˆ›å»ºç¬”è®°

```javascript
<%* 
let weatherUrl = 'https://restapi.amap.com/v3/weather/weatherInfo'
let key = 'YOUR_KEY'

let tencentIpUrl = 'https://apis.map.qq.com/ws/location/v1/ip';
let tencentKey = 'YOUR_KEY'

let adcode = eval("(" + await request({url: tencentIpUrl + `?key=${tencentKey}`, method: "GET"}) + ")").result.ad_info.adcode

console.log("adcode: " + adcode)

let ä½ç½® = ''
let å¤©æ°” = ''
let æ¸©åº¦ = ''
let é£å‘ = ''
await fetch(weatherUrl + `?key=${key}&city=${adcode}&extensions=all`)
.then(res => res.json())
.then((data) => {
	let info = data.forecasts[0]
	
	console.log("info:" + info)
	
	ä½ç½® = info.province + '-' + info.city
	å¤©æ°” = 'ğŸŒ…' + info.casts[0].dayweather + ' / ğŸŒƒ' + info.casts[0].nightweather
	æ¸©åº¦ = 'ğŸŒ…' + info.casts[0].daytemp_float + 'â„ƒ' + '/ ğŸŒƒ' + info.casts[0].nighttemp_float + 'â„ƒ'
})
-%>
---
ğŸŒ»æ—¥æœŸğŸŒ»: <% tp.file.creation_date("YYYY MM DD HH:mm:ss") %>
ğŸŒ™æ˜ŸæœŸğŸŒ™: <% tp.file.creation_date("dddd") %>
âŒšï¸æ—¶é—´âŒšï¸: <% tp.file.creation_date("HH:mm:ss") %>
ğŸŒä½ç½®ğŸŒ: <% ä½ç½® %>
â˜ï¸å¤©æ°”â˜ï¸: <% å¤©æ°” %>
ğŸŒ¡ï¸æ¸©åº¦ğŸŒ¡ï¸: <% æ¸©åº¦ %>
---
```